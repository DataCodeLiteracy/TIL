# ê³ ê¸‰ ë‚´ìš©ë“¤

## ë§ˆìš°ìŠ¤ ë”°ë¼ ê°€ê¸°

```jsx
import React, { useState } from 'react';
import './AppXY.css';

export default function AppXY() {
  const [position, setPosition] = useState({ x: 0, y: 0, z: 0 });
  return (
    <div
      className='container'
      onPointerMove={(e) => {
        // setPosition({ x: e.clientX, y: e.clientY });
        // ë§Œì•½ ìˆ˜í‰ìœ¼ë¡œë§Œ ì´ë™ì´ ê°€ëŠ¥í•˜ë‹¤ë©´?
        setPosition((prev) => ({ ...prev, x: e.clientX }));
      }}
    >
      <div
        className='pointer'
        style={{ transform: `translate(${position.x}px, ${position.y}px)` }}
      />
    </div>
  );
}
```

ì„œë¡œ ì—°ê´€ëœ ë°ì´í„°ë¥¼ ìƒíƒœ ê´€ë¦¬í•˜ëŠ” ë°©ë²•.. ê°ì²´ë¡œ ê´€ë¦¬í•˜ë¼..

```tsx
const [position, setPosition] = useState({ x: 0, y: 0, z: 0 });
```

## ì¤‘ì²© ê°ì²´ ìƒíƒœ ê´€ë¦¬

ì¤‘ì²© ê°ì²´ì˜ íŠ¹ì • ì†ì„± ê°’ì„ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œ, ìŠ¤í”„ë ˆë“œ ì—°ì‚°ìë¥¼ ì´ìš©í•´ì„œ ì´ì „ ê°ì²´ì˜ ì •ë³´ë¥¼ ìœ ì§€í•œ ì±„(ë¶ˆë³€ì„±) ì›í•˜ëŠ” ì†ì„± ê°’ë§Œ ë³€ê²½í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê´€ë¦¬

```jsx
import React, { useState } from 'react';

export default function AppMentor() {
  const [person, setPerson] = useState({
    name: 'ì—˜ë¦¬',
    title: 'ê°œë°œì',
    mentor: {
      name: 'ë°¥',
      title: 'ì‹œë‹ˆì–´ê°œë°œì',
    },
  });
  return (
    <div>
      <h1>
        {person.name}ëŠ” {person.title}
      </h1>
      <p>
        {person.name}ì˜ ë©˜í† ëŠ” {person.mentor.name} ({person.mentor.title})
      </p>
      <button
        onClick={() => {
          const name = prompt(`what's your mentor's name?`);
          setPerson((person) => ({
            ...person,
            mentor: { ...person.mentor, name },
          }));
        }}
      >
        ë©˜í†  ì´ë¦„ ë°”ê¾¸ê¸°
      </button>
      <button
        onClick={() => {
          const title = prompt(`what's your mentor's title?`);
          setPerson((person) => ({
            ...person,
            mentor: { ...person.mentor, title },
          }));
        }}
      >
        ë©˜í†  íƒ€ì´í‹€ ë°”ê¾¸ê¸°
      </button>
    </div>
  );
}
```

## ë°°ì—´ ìƒíƒœ ê´€ë¦¬

```jsx
import React, { useState } from 'react'

export default function AppMentor() {
  const [person, setPerson] = useState({
    name: 'ì—˜ë¦¬',
    title: 'ê°œë°œì',
    mentors: [
      {
        name: 'ë°¥',
        title: 'ì‹œë‹ˆì–´ê°œë°œì'
      },
      {
        name: 'ì œì„ìŠ¤',
        title: 'ì‹œë‹ˆì–´ê°œë°œì'
      }
    ]
  })
  return (
    <div>
      <h1>
        {person.name}ëŠ” {person.title}
      </h1>
      <p>{person.name}ì˜ ë©˜í† ëŠ”:</p>
      <ul>
        {person.mentors.map((mentor, index) => (
          <li key={index}>
            {mentor.name} ({mentor.title})
          </li>
        ))}
      </ul>
      <button
        onClick={() => {
          const prev = prompt(`ëˆ„êµ¬ì˜ ì´ë¦„ì„ ë°”ê¾¸ê³  ì‹¶ì€ê°€ìš”?`)
          const current = prompt(`ì´ë¦„ì„ ë¬´ì—‡ìœ¼ë¡œ ë°”ê¾¸ê³  ì‹¶ì€ê°€ìš”?`)
          setPerson((person) => ({
            ...person,
            mentors: person.mentors.map((mentor) => {
              if (mentor.name === prev) {
                return { ...mentor, name: current }
              }
              return mentor
            })
          }))
        }}
      >
        ë©˜í† ì˜ ì´ë¦„ì„ ë°”ê¾¸ê¸°
      </button>
    </div>
  )
}
```

## ë©˜í†  ì¶”ê°€/ì‚­ì œí•˜ê¸°

```jsx
const handleAdd = () => {
    const name = prompt(`ë©˜í† ì˜ ì´ë¦„ì€?`)
    const title = prompt(`ë©˜í† ì˜ ì§í•¨ì€?`)
    setPerson((person) => ({
      ...person,
      mentors: [...person.mentors, { name, title }]
    }))
  }

  const handleDelete = () => {
    const name = prompt(`ëˆ„êµ¬ë¥¼ ì‚­ì œí•˜ê³  ì‹¶ì€ê°€ìš”?`)
    setPerson((person) => ({
      ...person,
      mentors: person.mentors.filter((mentor) => mentor.name !== name)
    }))
  }
```

ê°ì²´, ë°°ì—´ì„ ì–´ë–»ê²Œ êµ¬ì¡° ë¶„í•´í•´ì„œ ì ì ˆí•˜ê²Œ ì—…ë°ì´íŠ¸ í•´ì¤„ ìˆ˜ ìˆëŠ”ì§€ë¥¼ í™•ì‹¤í•˜ê²Œ ì´í•´í•´ì•¼ í•œë‹¤.

```
const [person, setPerson] = useState({
  name: 'ì—˜ë¦¬',
  title: 'ê°œë°œì',
  mentors: [
    {
      name: 'ë°¥',
      title: 'ì‹œë‹ˆì–´ê°œë°œì'
    },
    {
      name: 'ì œì„ìŠ¤',
      title: 'ì‹œë‹ˆì–´ê°œë°œì'
    }
  ]
})
```

ë°ì´í„°ì˜ êµ¬ì¡°ë¥¼ íŒŒì•…í•´ì„œ, ì²˜ìŒ personì€ ê°ì²´ê³  ê·¸ ì•ˆì— name, title, mentors ì†ì„±ì´ ë“¤ì–´ìˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— mentorsë¥¼ ì—…ë°ì´íŠ¸ í•´ì£¼ê¸° ìœ„í•´ì„œëŠ” mentorsë¥¼ ë°°ì—´ë¡œì„œ ì—…ë°ì´íŠ¸ í•´ì¤˜ì•¼ í•œë‹¤. ê·¸ë˜ì„œ personë ˆë²¨ì€ ê°ì²´ì´ê¸° ë•Œë¬¸ì— mentors : ì—…ë°ì´íŠ¸ ì‚¬í•­ì„ ì „ë‹¬í•˜ë©´ ëœë‹¤. ì´ë•Œ [â€¦array ] ìŠ¤í”„ë ˆë“œ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•œ ë°°ì—´ë¡œì„œ ì—…ë°ì´íŠ¸ í•˜ê±°ë‚˜ ë°°ì—´ì˜ ê³ ì°¨í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ìƒˆë¡œìš´ ë°°ì—´ì„ ì „ë‹¬í•´ì•¼ í•œë‹¤. ì°¸ì¡°ê°’ì´ ë³€ê²½ë˜ì•¼ ë¦¬ì•¡íŠ¸ì˜ ê°€ìƒ DOMì—ì„œ ë³€ê²½ì‚¬í•­ì„ ê°ì§€í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•¨ì´ë‹¤. 

## ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•´

ìƒíƒœë¥¼ ì „ì—­ì—ì„œ ê´€ë¦¬í•˜ê³ , ë¶ˆë³€ì„±ì„ ìœ ì§€ì‹œì¼œì£¼ë©° íš¨ìœ¨ì ìœ¼ë¡œ ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•´ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§ì´ ì‚¬ìš©í•˜ëŠ”ë°, í˜„ì¬ ë¦¬ì•¡íŠ¸ì—ì„œëŠ” useReducer í›…ì´ë‚˜ Context APIë¥¼ ì´ìš©í•´ì„œ ì¶©ë¶„íˆ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ ìˆë‹¤. 

## Reducer ì‚¬ìš©í•´ë³´ê¸°

```jsx
export default function personReducer(person, action) {
  switch (action.type) {
    case 'updated': {
      const { prev, current } = action;
      return {
        ...person,
        mentors: person.mentors.map((mentor) => {
          if (mentor.name === prev) {
            return { ...mentor, name: current };
          }
          return mentor;
        }),
      };
    }
    case 'added': {
      const { name, title } = action;
      return {
        ...person,
        mentors: [...person.mentors, { name, title }],
      };
    }
    case 'deleted': {
      return {
        ...person,
        mentors: person.mentors.filter((mentor) => mentor.name !== action.name),
      };
    }
    default: {
      throw Error(`ì•Œìˆ˜ì—†ëŠ” ì•¡ì…˜ íƒ€ì…ì´ë‹¤: ${action.type}`);
    }
  }
}
```

```jsx
import React, { useReducer } from 'react'
import personReducer from './reducer/person-reducer'

export default function AppMentors() {
  const [person, dispatch] = useReducer(personReducer, initialPerson)

  const handleUpdate = () => {
    const prev = prompt(`ëˆ„êµ¬ì˜ ì´ë¦„ì„ ë°”ê¾¸ê³  ì‹¶ì€ê°€ìš”?`)
    const current = prompt(`ì´ë¦„ì„ ë¬´ì—‡ìœ¼ë¡œ ë°”ê¾¸ê³  ì‹¶ì€ê°€ìš”?`)
    dispatch({ type: 'updated', prev, current })
  }

  const handleAdd = () => {
    const name = prompt(`ë©˜í† ì˜ ì´ë¦„ì€?`)
    const title = prompt(`ë©˜í† ì˜ ì§í•¨ì€?`)
    dispatch({ type: 'added', name, title })
  }

  const handleDelete = () => {
    const name = prompt(`ëˆ„êµ¬ë¥¼ ì‚­ì œí•˜ê³  ì‹¶ì€ê°€ìš”?`)
    dispatch({ type: 'deleted', name })
  }

  return (
    <div>
      <h1>
        {person.name}ëŠ” {person.title}
      </h1>
      <p>{person.name}ì˜ ë©˜í† ëŠ”:</p>
      <ul>
        {person.mentors.map((mentor, index) => (
          <li key={index}>
            {mentor.name} ({mentor.title})
          </li>
        ))}
      </ul>
      <button onClick={handleUpdate}>ë©˜í† ì˜ ì´ë¦„ì„ ë°”ê¾¸ê¸°</button>
      <button onClick={handleAdd}>ë©˜í†  ì¶”ê°€í•˜ê¸°</button>
      <button onClick={handleDelete}>ë©˜í†  ì‚­ì œí•˜ê¸°</button>
    </div>
  )
}

const initialPerson = {
  name: 'ì—˜ë¦¬',
  title: 'ê°œë°œì',
  mentors: [
    {
      name: 'ë°¥',
      title: 'ì‹œë‹ˆì–´ê°œë°œì'
    },
    {
      name: 'ì œì„ìŠ¤',
      title: 'ì‹œë‹ˆì–´ê°œë°œì'
    }
  ]
}
```

```tsx
const [person, dispatch] = useReducer(personReducer, initialPerson)
```

- const [person, dispatch]: personì€ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë³€ìˆ˜ì´ë©°, dispatchëŠ” ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ì—­í• ì„ í•˜ëŠ” í•¨ìˆ˜ë‹¤. ë°°ì—´ ë¹„êµ¬ì¡°í™” í• ë‹¹ì„ ì‚¬ìš©í•˜ì—¬ useReducerì˜ ë°˜í™˜ ê°’ì—ì„œ ìƒíƒœì™€ ë””ìŠ¤íŒ¨ì¹˜ í•¨ìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
- useReducer(personReducer, initialPerson): useReducerëŠ” ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ í›…ìœ¼ë¡œ, ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ëœ personReducer í•¨ìˆ˜ì™€ ì´ˆê¸° ìƒíƒœì¸ initialPersonì„ ë°›ëŠ”ë‹¤. personReducer í•¨ìˆ˜ëŠ” í˜„ì¬ ìƒíƒœì™€ ì•¡ì…˜ì„ ì¸ìë¡œ ë°›ì•„ì„œ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë‹¤. ì´ë ‡ê²Œ ìƒíƒœì™€ ì•¡ì…˜ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ê³„ì‚°í•˜ì—¬ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆê²Œ í•œë‹¤.
- ì¦‰, personì€ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ê³ , dispatch í•¨ìˆ˜ë¥¼ í†µí•´ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìˆê²Œ ëœë‹¤. personReducer í•¨ìˆ˜ëŠ” ì•¡ì…˜ì— ë”°ë¼ ìƒíƒœë¥¼ ì–´ë–»ê²Œ ë³€ê²½í• ì§€ë¥¼ ì •ì˜í•˜ëŠ” ì—­í• ì„ í•œë‹¤.

## Immer ì‚¬ìš©í•´ë³´ê¸°

```jsx
export default function AppMentorsImmer() {
  const [person, updatePerson] = useImmer(initialPerson);
  const handleUpdate = () => {
    const prev = prompt(`ëˆ„êµ¬ì˜ ì´ë¦„ì„ ë°”ê¾¸ê³  ì‹¶ì€ê°€ìš”?`);
    const current = prompt(`ì´ë¦„ì„ ë¬´ì—‡ìœ¼ë¡œ ë°”ê¾¸ê³  ì‹¶ì€ê°€ìš”?`);
    updatePerson((person) => {
      const mentor = person.mentors.find((m) => m.name === prev);
      mentor.name = current;
    });
  };
  const handleAdd = () => {
    const name = prompt(`ë©˜í† ì˜ ì´ë¦„ì€?`);
    const title = prompt(`ë©˜í† ì˜ ì§í•¨ì€?`);
    updatePerson((person) => person.mentors.push({ name, title }));
  };
  const handleDelete = () => {
    const name = prompt(`ëˆ„êµ¬ë¥¼ ì‚­ì œí•˜ê³  ì‹¶ì€ê°€ìš”?`);
    updatePerson((person) => {
      const index = person.mentors.findIndex((m) => m.name === name);
      person.mentors.splice(index, 1);
    });
  };
  return (
    <div>
      <h1>
        {person.name}ëŠ” {person.title}
      </h1>
      <p>{person.name}ì˜ ë©˜í† ëŠ”:</p>
      <ul>
        {person.mentors.map((mentor, index) => (
          <li key={index}>
            {mentor.name} ({mentor.title})
          </li>
        ))}
      </ul>
      <button onClick={handleUpdate}>ë©˜í† ì˜ ì´ë¦„ì„ ë°”ê¾¸ê¸°</button>
      <button onClick={handleAdd}>ë©˜í†  ì¶”ê°€í•˜ê¸°</button>
      <button onClick={handleDelete}>ë©˜í†  ì‚­ì œí•˜ê¸°</button>
    </div>
  );
}
```

## Formì„ ë§Œë“œëŠ” ë²•

```jsx
import React, { useState } from 'react'

export default function AppForm() {
  const [form, setForm] = useState({ name: '', email: '' })
  const handleSubmit = (e) => {
    e.preventDefault()
    console.log(form)
  }
  const handleChange = (e) => {
    const { name, value } = e.target
    setForm({ ...form, [name]: value })
  }
  return (
    <form onSubmit={handleSubmit}>
      <label htmlFor="name">ì´ë¦„:</label>
      <input
        type="text"
        id="name"
        name="name"
        value={form.name}
        onChange={handleChange}
      />
      <label htmlFor="email">ì´ë©”ì¼:</label>
      <input
        type="email"
        id="email"
        name="email"
        value={form.email}
        onChange={handleChange}
      />
      <button>Submit</button>
    </form>
  )
}
```

inputì˜ value, onChange ì†ì„±ì´ ì—†ìœ¼ë©´, formì€ ë¦¬ì•¡íŠ¸ ë‚´ë¶€ì ìœ¼ë¡œ ìƒíƒœê´€ë¦¬ê°€ ë˜ì§€ ì•Šì•„ë„ form ë‚´ë¶€ inputì°½ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥ê°€ëŠ¥í•˜ë‹¤. ì´ëŠ” í†µì œê°€ ë˜ì§€ ì•ŠëŠ” ë‹¤ëŠ” ì˜ë¯¸ì˜ unControlled Componentë¼ê³  ë¶€ë¥¸ë‹¤.

## ì»´í¬ë„ŒíŠ¸ì˜ ì¬ì‚¬ìš©

### HOC

```jsx
import React from 'react';

export default function AppWrap() {
  return (
    <div>
      <Navbar>
        <Avatar
          image='https://images.unsplash.com/photo-1527980965255-d3b416303d12?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1160&q=80'
          name='Bob'
          size={200}
        />
        <p>ì•ˆë…•í•˜ì„¸ìš”!</p>
      </Navbar>

      <Navbar>
        <p>ì•ˆë…•í•˜ì„¸ìš”!</p>
      </Navbar>
    </div>
  );
}

function Navbar({ children }) {
  return <header style={{ backgroundColor: 'yellow' }}>{children}</header>;
}

function Avatar({ image, name, size }) {
  return (
    <div>
      <img
        src={image}
        alt={`${name}'`}
        width={size}
        height={size}
        style={{ borderRadius: '50%' }}
      />
    </div>
  );
}
```

```jsx
import React from 'react';

export default function AppCard() {
  return (
    <>
      <Card>
        <p>Card1</p>
      </Card>

      <Card>
        <h1>Card2</h1>
        <p>ì„¤ëª…</p>
      </Card>

      <Card>
        <article></article>
      </Card>
    </>
  );
}

function Card({ children }) {
  return (
    <div
      style={{
        backgroundColor: 'black',
        borderRadius: '20px',
        color: 'white',
        minHeight: '200px',
        maxWidth: '200px',
        margin: '1rem',
        padding: '1rem',
        textAlign: 'center',
      }}
    >
      {children}
    </div>
  );
}
```

## Contextë€?

- useStateë¡œ ê´€ë¦¬í•˜ëŠ” ìƒíƒœê°’ì€ ë‹¤ìˆ˜ì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê³µìœ í•  ìˆ˜ ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤.
- propìœ¼ë¡œ ì „ë‹¬í•´ì„œ í•´ê²°í•  ìˆ˜ ìˆì§€ë§Œ, props drillingì´ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì¢‹ì€ í•´ê²° ë°©ë²•ì€ ì•„ë‹ˆë‹¤.
- ì´ë•Œ Context APIê°€ í•„ìš”í•˜ë‹¤. ë¦¬ì•¡íŠ¸ì˜ ContextëŠ” ì»´í¬ë„ŒíŠ¸ ê°„ì— ì „ì—­ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê³µìœ í•˜ê³  ì „ë‹¬í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ì „ì²´ì—ì„œ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê³µìœ í•˜ê³ , í”„ë¡œí¼í‹°ë¥¼ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ê±°ì³ ì „ë‹¬í•˜ì§€ ì•Šì•„ë„ ë˜ê²Œ í•´ì¤€ë‹¤.
- ë¦¬ì•¡íŠ¸ì˜ ContextëŠ” ì»´í¬ë„ŒíŠ¸ ê°„ì— ì „ì—­ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê³µìœ í•˜ê³  ì „ë‹¬í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ì „ì²´ì—ì„œ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê³µìœ í•˜ê³ , í”„ë¡œí¼í‹°ë¥¼ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ê±°ì³ ì „ë‹¬í•˜ì§€ ì•Šì•„ë„ ë˜ê²Œ í•´ì¤€ë‹¤.
    
    ContextëŠ” ì£¼ë¡œ ë‹¤ìŒ ìƒí™©ì—ì„œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ëœë‹¤:
    
    1. ì „ì—­ ìƒíƒœ ê´€ë¦¬: ì»´í¬ë„ŒíŠ¸ ê°„ì— ê³µìœ ë˜ëŠ” ì „ì—­ ìƒíƒœë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤. Reduxì™€ ê°™ì€ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.
    2. í…Œë§ˆ ë° ìŠ¤íƒ€ì¼ ì„¤ì •: ì•±ì˜ í…Œë§ˆë‚˜ ìŠ¤íƒ€ì¼ê³¼ ê°™ì´ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì„¤ì •ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì „ë‹¬í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.
    3. ë‹¤êµ­ì–´ ì§€ì›: ë‹¤êµ­ì–´ ì§€ì›ê³¼ ê°™ì´ ì•± ì „ë°˜ì—ì„œ ê³µìœ ë˜ëŠ” ë°ì´í„°ë¥¼ ì»´í¬ë„ŒíŠ¸ë“¤ì—ê²Œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
    
    Contextë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ë¥¼ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì œê³µí•˜ê³ , ì´ë¥¼ ì†ì‰½ê²Œ ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. Contextë¥¼ ìƒì„±í•˜ê³  ê°’ì„ ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì€ createContext í•¨ìˆ˜ì™€ Provider ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë£¨ì–´ì§„ë‹¤. ê·¸ë¦¬ê³  ê°’ì„ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” useContext í›…ì„ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ Contextì˜ ê°’ì„ ê°€ì ¸ì™€ í™œìš©í•  ìˆ˜ ìˆë‹¤.
    
- contextëŠ” providerë¼ëŠ” ìš°ì‚°ì„ ì”Œìš´ë‹¤. ì´ëŠ” í•„ìš”í•œ ê³³ì— ì ì ˆí•œ ë²”ìœ„ì— ì‚¬ìš©í•´ì•¼ í•œë‹¤.

```jsx
import { createContext, useState } from 'react';

export const DarkModeContext = createContext();

export function DarkModeProvider({ children }) {
  const [darkMode, setDarkMode] = useState(false);
  const toggleDarkMode = () => setDarkMode((mode) => !mode);
  return (
    <DarkModeContext.Provider value={{ darkMode, toggleDarkMode }}>
      {children}
    </DarkModeContext.Provider>
  );
}
```

```jsx
import React, { useContext } from 'react';
import './AppTheme.css';
import { DarkModeContext, DarkModeProvider } from './context/DarkModeContext';

export default function AppTheme() {
  return (
    <DarkModeProvider>
      <Header />
      <Main />
      <Footer />
    </DarkModeProvider>
  );
}

function Header() {
  return <header className='header'>Header</header>;
}

function Main() {
  return (
    <main className='main'>
      Main
      <Profile />
      <Products />
    </main>
  );
}

function Profile() {
  return (
    <div>
      Profile
      <User />
    </div>
  );
}

function User() {
  return <div>User</div>;
}

function Products() {
  return (
    <div>
      Products
      <ProductDetail />
    </div>
  );
}

function ProductDetail() {
  const { darkMode, toggleDarkMode } = useContext(DarkModeContext);
  return (
    <div>
      Product Detail
      <p>
        DarkMode:
        {darkMode ? (
          <span style={{ backgroundColor: 'black', color: 'white' }}>
            Dark Mode
          </span>
        ) : (
          <span>Light Mode</span>
        )}
      </p>
      <button onClick={() => toggleDarkMode()}>Toggle</button>
    </div>
  );
}

function Footer() {
  return <footer className='footer'>Footer</footer>;
}
```

## ì„±ëŠ¥ ê°œì„ 

ë¦¬ì•¡íŠ¸ëŠ” propê³¼ stateê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ í˜¸ì¶œí•œë‹¤.

- useMemo, useCallback, React.memoë¥¼ ì‚¬ìš©í•œë‹¤.

```jsx
const Button = memo(({ text, onClick }) => {
  console.log('Button', text, 're-rendering ğŸ˜œ');
  const result = useMemo(() => calculateSomething(), []);
  return (
    <button
      onClick={onClick}
      style={{
        backgroundColor: 'black',
        color: 'white',
        borderRadius: '20px',
        margin: '0.4rem',
      }}
    >
      {`${text} ${result}`}
    </button>
  );
});

function calculateSomething() {
  for (let i = 0; i < 10000; i++) {
    console.log('ğŸ˜†');
  }
  return 10;
}
```

```jsx
const handleUpdate = useCallback(() => {
    const prev = prompt(`ëˆ„êµ¬ì˜ ì´ë¦„ì„ ë°”ê¾¸ê³  ì‹¶ì€ê°€ìš”?`);
    const current = prompt(`ì´ë¦„ì„ ë¬´ì—‡ìœ¼ë¡œ ë°”ê¾¸ê³  ì‹¶ì€ê°€ìš”?`);
    dispatch({ type: 'updated', prev, current });
  }, []);

  const handleAdd = useCallback(() => {
    const name = prompt(`ë©˜í† ì˜ ì´ë¦„ì€?`);
    const title = prompt(`ë©˜í† ì˜ ì§í•¨ì€?`);
    dispatch({ type: 'added', name, title });
  }, []);

  const handleDelete = useCallback(() => {
    const name = prompt(`ëˆ„êµ¬ë¥¼ ì‚­ì œí•˜ê³  ì‹¶ì€ê°€ìš”?`);
    dispatch({ type: 'deleted', name });
  }, []);
```

## ë¡œë”©, ì—ëŸ¬ ìƒíƒœ ì¶”ê°€, ì»¤ìŠ¤í…€ í›…

```jsx
import { useEffect, useState } from 'react';

export default function useProducts({ salesOnly }) {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState();
  const [products, setProducts] = useState([]);
  useEffect(() => {
    setLoading(true);
    setError(undefined);
    fetch(`data/${salesOnly ? 'sale_' : ''}products.json`)
      .then((res) => res.json())
      .then((data) => {
        console.log('ğŸ”¥ëœ¨ëˆí•œ ë°ì´í„°ë¥¼ ë„¤íŠ¸ì›Œí¬ì—ì„œ ë°›ì•„ì˜´');
        setProducts(data);
      })
      .catch((e) => setError('ì—ëŸ¬ê°€ ë°œìƒí–ˆìŒ!'))
      .finally(() => setLoading(false));
    return () => {
      console.log('ğŸ§¹ ê¹¨ë—í•˜ê²Œ ì²­ì†Œí•˜ëŠ” ì¼ë“¤ì„ í•©ë‹ˆë‹¤.');
    };
  }, [salesOnly]);

  return [loading, error, products];
}
```

## í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸